# ============================================================================
# NoSlop Environment Configuration
# ============================================================================
# Copy this file to .env and customize for your environment.
# Note: When using the NoSlop Seed installer, a tailored .env file is 
# automatically generated for each node.

# ============================================================================
# 1. Application Identity & General Settings
# ============================================================================
APP_NAME=NoSlop
APP_VERSION=0.02
DEBUG=true

# ============================================================================
# 2. Server Configuration (Backend)
# ============================================================================
HOST=0.0.0.0
PORT=8000
# SECRET_KEY=change-this-in-production-to-a-secure-random-string

# ============================================================================
# 3. Node Identity (Set automatically by Deployer)
# ============================================================================
# Unique identifier for this device in the cluster
NOSLOP_NODE_HOSTNAME=noslop-node-01
# IP address of this device
NOSLOP_NODE_IP=127.0.0.1
# Roles assigned to this node: master, compute, storage, client, or all
NOSLOP_NODE_ROLES=all

# ============================================================================
# 4. Network & Service Service Discovery
# ============================================================================
# URL of the Backend API (Central Master Node)
# Used by Worker nodes to report status and get tasks
NOSLOP_BACKEND_URL=http://localhost:8000

# IP/Hostname of the Master Node
NOSLOP_MASTER_IP=127.0.0.1
NOSLOP_MASTER_HOSTNAME=noslop-master

# Frontend Access (Next.js)
# URL for the frontend to access the backend API
# For standard deployments, set this to your backend URL
NEXT_PUBLIC_API_URL=http://localhost:8000

# ============================================================================
# Cloudflare Tunnel Configuration (Optional)
# ============================================================================
# If using Cloudflare Tunnel for HTTPS access:
# 1. Point your Cloudflare Tunnel to http://localhost:8080
# 2. Set NEXT_PUBLIC_API_URL to empty string (enables relative paths)
# 3. Set external URLs to your Cloudflare domain
#
# Example for Cloudflare Tunnel:
#   NEXT_PUBLIC_API_URL=
#   NOSLOP_FRONTEND_EXTERNAL_URL=https://app.noslop.me
#   NOSLOP_BACKEND_EXTERNAL_URL=https://app.noslop.me

# ============================================================================
# 5. Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_DIR=logs
ENABLE_CONSOLE_LOG=true
ENABLE_FILE_LOG=true
ENABLE_JSON_LOG=false

# ============================================================================
# 6. Database Configuration
# ============================================================================
# Connection string for the database
# SQLite (Single Device): sqlite:///./noslop.db
# PostgreSQL (Multi Device): postgresql://user:pass@host:5432/noslop
DATABASE_URL=sqlite:///./noslop.db

# ============================================================================
# 7. Ollama Configuration (LLM Service)
# ============================================================================
OLLAMA_HOST=http://localhost:11434
OLLAMA_TIMEOUT=120

# Default fallback model
OLLAMA_DEFAULT_MODEL=gemma3:4b-it-q4_K_M

# Specialized Model Preferences
# Logic: Planning, reasoning, complex instruction following
MODEL_LOGIC=gemma3:4b-it-q4_K_M
# Video: Understanding video context or generating video prompts
MODEL_VIDEO=qwen3-vl:4b-instruct-q8_0
# Image: Image recognition and vision tasks
MODEL_IMAGE=llava:latest
# Math: Calculations and coordinates
MODEL_MATH=gemma3:4b-it-q4_K_M
# Code: Programming and script generation
MODEL_CODE=qwen2.5-coder:7b
# Embedding: Vector embeddings for RAG/Knowledge
MODEL_EMBEDDING=nomic-embed-text

# ============================================================================
# 8. ComfyUI Configuration (Image/Video Generation)
# ============================================================================
COMFYUI_ENABLED=false
COMFYUI_HOST=http://localhost:8188
COMFYUI_TIMEOUT=300
COMFYUI_OUTPUT_DIR=media/generated

# ============================================================================
# 9. Storage Configuration
# ============================================================================
# Local paths for data storage
MEDIA_STORAGE_PATH=./media
PROJECT_STORAGE_PATH=./projects
LOG_STORAGE_PATH=./logs

# Shared Storage (NFS/SMB)
# Enabled in multi-device clusters to share models and files
SHARED_STORAGE_ENABLED=false
OLLAMA_MODELS_DIR=/mnt/noslop/ollama/models
COMFYUI_MODELS_DIR=/mnt/noslop/comfyui/models
COMFYUI_CUSTOM_NODES_DIR=/mnt/noslop/comfyui/custom_nodes
PROJECT_STORAGE_DIR=/mnt/noslop/projects
MEDIA_CACHE_DIR=/mnt/noslop/media_cache

# ============================================================================
# 10. External Tools (FFmpeg / OpenCV)
# ============================================================================
FFMPEG_PATH=ffmpeg
FFPROBE_PATH=ffprobe
MEDIA_OUTPUT_DIR=media/output

# ============================================================================
# 11. Resource Limits & Performance
# ============================================================================
MAX_CONCURRENT_TASKS=5
MAX_PROJECT_SIZE_MB=10240
MAX_WORKERS_PER_PROJECT=10

# ============================================================================
# 12. Admin AI Personality Defaults
# ============================================================================
DEFAULT_PERSONALITY=balanced
DEFAULT_CREATIVITY=0.7
DEFAULT_FORMALITY=0.5
DEFAULT_VERBOSITY=0.6
DEFAULT_ENTHUSIASM=0.7
DEFAULT_TECHNICAL_DEPTH=0.6

# ============================================================================
# 13. Security
# ============================================================================
# Allowed origins for CORS (Comma separated)
# Use * for development or specific domains for production
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ============================================================================
# 14. SSL/TLS Configuration
# ============================================================================
# Enable SSL for backend (requires certificates and Caddy reverse proxy)
NOSLOP_SSL_ENABLED=false
NOSLOP_SSL_CERT=/etc/noslop/certs/server.crt
NOSLOP_SSL_KEY=/etc/noslop/certs/server.key

# External URL for backend (used by frontend for API calls)
# For HTTPS via Cloudflare Tunnel: https://api.noslop.me
# For HTTPS via Caddy: https://192.168.0.22:8443
# For HTTP (default): http://192.168.0.22:8000
NOSLOP_BACKEND_EXTERNAL_URL=http://192.168.0.22:8000
# Legacy alias (will be deprecated)
# NEXT_PUBLIC_BACKEND_EXTERNAL_URL=http://192.168.0.22:8000

# Frontend external URL (for browser access)
# For HTTPS: https://app.noslop.me
# For HTTP: http://192.168.0.22:3000
NOSLOP_FRONTEND_EXTERNAL_URL=http://192.168.0.22:3000

# ============================================================================
# 15. Feature Flags
# ============================================================================
ENABLE_PROJECT_MANAGER=true
ENABLE_WORKER_AGENTS=false
ENABLE_BLOCKCHAIN=false
ENABLE_MESH_NETWORK=false
